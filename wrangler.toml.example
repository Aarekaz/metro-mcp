name = "metro-mcp"
main = "src/index.ts"
compatibility_date = "2025-12-25"
workers_dev = true

# Preserve environment variables set in dashboard on deploy
keep_vars = true

# Minify JavaScript for better performance
minify = true

# Upload source maps for better error debugging
upload_source_maps = true

# KV Namespaces for OAuth client registration
# Create these with:
#   bunx wrangler kv namespace create "OAUTH_CLIENTS"
#   bunx wrangler kv namespace create "OAUTH_CLIENTS" --preview
[[kv_namespaces]]
binding = "OAUTH_CLIENTS"
id = "your-kv-namespace-id-here"
preview_id = "your-preview-kv-namespace-id-here"

# Non-secret environment variables
# These can be safely committed to git
[vars]
GITHUB_CLIENT_ID = "your-github-oauth-app-client-id"  # OAuth client ID (public)
OAUTH_REDIRECT_URI = "https://your-subdomain.workers.dev/callback"

# Observability and logging configuration
[observability]
enabled = true  # Enable for production monitoring

[observability.logs]
enabled = true  # Enable logging
head_sampling_rate = 0.1  # Sample 10% of requests (0.1 = 10%, 1 = 100%)
invocation_logs = true  # Log Worker invocations

# See .dev.vars.example for local development secrets
# For production, use: bunx wrangler secret put SECRET_NAME

